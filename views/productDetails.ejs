<%- include('partials/header'); -%>
<link rel="stylesheet" href="/css/bootstrap.min.css" />

<div class="d-flex justify-content-center align-items-center px-5">
  <div class="mx-5 shadow d-flex justify-content-center px-5 py-5">
    <div class="px-5">
      <img
        style="width: 500px"
        src="/uploads/<%= images.filename %>"
        alt="shoes"
      />
    </div>

    <div class="">
      <h3><%= images.productname %></h3>
      <div class="d-flex gap-3">
        <div class="">
          <span class="fa fa-star checked"></span>
          <span class="fa fa-star checked"></span>
          <span class="fa fa-star checked"></span>
          <span class="fa fa-star checked"></span>
          <span class="fa fa-star checked"></span>
        </div>
        <p>|</p>
        <a href="#">75 Ratings</a>
        <p>|</p>
        <p>163 Sold</p>
      </div>
      <h2 class="mx-3 mt-2 mb-4 price"></h2>
      <input class="origPrice" type="hidden" value="<%= images.price %>" />

      <p class="pe-5"><%= images.description %></p>

      <h6>Sizes</h6>
      <div class="ms-5 d-flex gap-5">
        <button class="btn btn-outline-warning btn-sm text-dark">US 7</button>
        <button class="btn btn-outline-warning text-dark">US 7.5</button>
        <button class="btn btn-outline-warning text-dark">US 8</button>
        <button class="btn btn-outline-warning text-dark">US 8.5</button>
      </div>

      <div class="d-flex gap-3 mt-3">
        <h6>Quantity:</h6>

        <div class="fw-light">
          <form>
            <div class="d-flex">
              <div
                class="indec value-button text-center bg-warning-subtle text-warning-emphasis"
                id="decrease"
                onclick="decreaseValue()"
                value="Decrease Value"
                style="width: 30px"
              >
                -
              </div>
              <input
                type="number"
                id="number"
                value="0"
                style="width: 40px"
                class="bg-warning-subtle text-warning-emphasis border-0 text-center"
              />
              <div
                class="indec value-button text-center bg-warning-subtle text-warning-emphasis"
                id="increase"
                onclick="increaseValue()"
                value="Increase Value"
                style="width: 30px"
              >
                +
              </div>
            </div>
          </form>
        </div>
      </div>

      <div class="mt-3 d-flex gap-3">
        <%- include('partials/buyButton', {post: images}) %> <%-
        include('partials/cartButton', {post: images}) %>
      </div>
    </div>
  </div>
</div>
<%- include('partials/footer'); -%>

<script>
  const origPrice = document.querySelector(".origPrice").value;

  function printWithSpaces(number) {
    let numString = number.toString();
    let length = numString.length;
    let result = "";

    for (let i = 0; i < length; i++) {
      result += numString[i];

      if ((length - i - 1) % 3 === 0 && i !== length - 1) {
        result += ",";
      }
    }
    document.querySelector(".price").innerHTML = "â‚± " + result;
  }

  printWithSpaces(origPrice);
</script>
